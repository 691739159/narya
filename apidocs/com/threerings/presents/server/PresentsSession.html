<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_29) on Fri Feb 03 13:31:55 PST 2012 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
PresentsSession (Narya Core 1.11 API)
</TITLE>

<META NAME="date" CONTENT="2012-02-03">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="PresentsSession (Narya Core 1.11 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/PresentsSession.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/threerings/presents/server/PresentsServer.PresentsServerModule.html" title="class in com.threerings.presents.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/threerings/presents/server/PresentsSession.UserChangeListener.html" title="interface in com.threerings.presents.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/threerings/presents/server/PresentsSession.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PresentsSession.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.threerings.presents.server</FONT>
<BR>
Class PresentsSession</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>com.threerings.presents.server.PresentsSession</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../../com/threerings/presents/server/ClientResolutionListener.html" title="interface in com.threerings.presents.server">ClientResolutionListener</A>, <A HREF="../../../../com/threerings/presents/server/net/PresentsConnection.MessageHandler.html" title="interface in com.threerings.presents.server.net">PresentsConnection.MessageHandler</A></DD>
</DL>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../com/threerings/bureau/server/BureauSession.html" title="class in com.threerings.bureau.server">BureauSession</A>, <A HREF="../../../../com/threerings/crowd/server/CrowdSession.html" title="class in com.threerings.crowd.server">CrowdSession</A>, <A HREF="../../../../com/threerings/presents/peer/server/PeerSession.html" title="class in com.threerings.presents.peer.server">PeerSession</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>PresentsSession</B><DT>extends java.lang.Object<DT>implements <A HREF="../../../../com/threerings/presents/server/net/PresentsConnection.MessageHandler.html" title="interface in com.threerings.presents.server.net">PresentsConnection.MessageHandler</A>, <A HREF="../../../../com/threerings/presents/server/ClientResolutionListener.html" title="interface in com.threerings.presents.server">ClientResolutionListener</A></DL>
</PRE>

<P>
Represents a client session in the server. It is associated with a connection instance (while
 the client is connected) and acts as the intermediary for the remote client in terms of passing
 along events forwarded by the client, ensuring that subscriptions are maintained on behalf of
 the client and that events are forwarded to the client.

 <p><em>A note on synchronization:</em> the client object is structured so that its
 <code>Subscriber</code> implementation (which is called from the dobjmgr thread) can proceed
 without synchronization. This does not overlap with its other client duties which are called
 from the conmgr thread and therefore also need not be synchronized.
<P>

<P>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;interface</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.UserChangeListener.html" title="interface in com.threerings.presents.server">PresentsSession.UserChangeListener</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Used by <A HREF="../../../../com/threerings/presents/server/PresentsSession.html#setUsername(com.threerings.util.Name, com.threerings.presents.server.PresentsSession.UserChangeListener)"><CODE>setUsername(com.threerings.util.Name, com.threerings.presents.server.PresentsSession.UserChangeListener)</CODE></A> to report success or failure.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#PresentsSession()">PresentsSession</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#checkExpired(long)">checkExpired</A></B>(long&nbsp;now)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns true if this session has been disconnected for sufficiently long that it should be
 forcibly ended.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#clientResolved(com.threerings.util.Name, com.threerings.presents.data.ClientObject)">clientResolved</A></B>(<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A>&nbsp;username,
               <A HREF="../../../../com/threerings/presents/data/ClientObject.html" title="class in com.threerings.presents.data">ClientObject</A>&nbsp;clobj)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when resolution completed successfully.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#endSession()">endSession</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Forcibly terminates a client's session.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getAuthName()">getAuthName</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the username with which this client authenticated.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/threerings/presents/data/ClientObject.html" title="class in com.threerings.presents.data">ClientObject</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getClientObject()">getClientObject</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returns the client object that is associated with this client.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../../com/threerings/presents/net/Credentials.html" title="class in com.threerings.presents.net">Credentials</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getCredentials()">getCredentials</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the credentials used to authenticate this session.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.net.InetAddress</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getInetAddress()">getInetAddress</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the address of the connected client or null if this client is not connected.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getNetworkStamp()">getNetworkStamp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the time at which this client most recently connected or disconnected.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;byte[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getSecret()">getSecret</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the shared secret for this session.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getSessionStamp()">getSessionStamp</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the time at which this client started their network session.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.util.TimeZone</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getTimeZone()">getTimeZone</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Returns the time zone in which the client is operating.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getTransmitDatagrams()">getTransmitDatagrams</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Checks whether the client has requested that datagram transmission be enabled.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#handleMessage(com.threerings.presents.net.Message)">handleMessage</A></B>(<A HREF="../../../../com/threerings/presents/net/Message.html" title="class in com.threerings.presents.net">Message</A>&nbsp;message)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when a complete message has been parsed from incoming network data.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#resolutionFailed(com.threerings.util.Name, java.lang.Exception)">resolutionFailed</A></B>(<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A>&nbsp;username,
                 java.lang.Exception&nbsp;reason)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Called when resolution fails.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#setClassLoader(java.lang.ClassLoader)">setClassLoader</A></B>(java.lang.ClassLoader&nbsp;loader)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Configures this session with a custom class loader that will be used when unserializing
 classes from the network.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#setIncomingMessageThrottle(int)">setIncomingMessageThrottle</A></B>(int&nbsp;messagesPerSec)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Configures the rate at which incoming messages are throttled for this client.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#setUsername(com.threerings.util.Name, com.threerings.presents.server.PresentsSession.UserChangeListener)">setUsername</A></B>(<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A>&nbsp;username,
            <A HREF="../../../../com/threerings/presents/server/PresentsSession.UserChangeListener.html" title="interface in com.threerings.presents.server">PresentsSession.UserChangeListener</A>&nbsp;ucl)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>Danger:</em> this method is not for general consumption.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#shutdown()">shutdown</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is called when the server is shut down in the middle of a client session.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#toString()">toString</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../com/threerings/presents/server/PresentsSession.html#updateUsername(com.threerings.util.Name)">updateUsername</A></B>(<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A>&nbsp;username)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<em>Double Danger:</em> this method is not for general consumption.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>equals, getClass, hashCode, notify, notifyAll, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="PresentsSession()"><!-- --></A><H3>
PresentsSession</H3>
<PRE>
public <B>PresentsSession</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="getCredentials()"><!-- --></A><H3>
getCredentials</H3>
<PRE>
public <A HREF="../../../../com/threerings/presents/net/Credentials.html" title="class in com.threerings.presents.net">Credentials</A> <B>getCredentials</B>()</PRE>
<DL>
<DD>Returns the credentials used to authenticate this session.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getTimeZone()"><!-- --></A><H3>
getTimeZone</H3>
<PRE>
public java.util.TimeZone <B>getTimeZone</B>()</PRE>
<DL>
<DD>Returns the time zone in which the client is operating.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSecret()"><!-- --></A><H3>
getSecret</H3>
<PRE>
public byte[] <B>getSecret</B>()</PRE>
<DL>
<DD>Returns the shared secret for this session.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="checkExpired(long)"><!-- --></A><H3>
checkExpired</H3>
<PRE>
public boolean <B>checkExpired</B>(long&nbsp;now)</PRE>
<DL>
<DD>Returns true if this session has been disconnected for sufficiently long that it should be
 forcibly ended.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getSessionStamp()"><!-- --></A><H3>
getSessionStamp</H3>
<PRE>
public long <B>getSessionStamp</B>()</PRE>
<DL>
<DD>Returns the time at which this client started their network session.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getNetworkStamp()"><!-- --></A><H3>
getNetworkStamp</H3>
<PRE>
public long <B>getNetworkStamp</B>()</PRE>
<DL>
<DD>Returns the time at which this client most recently connected or disconnected.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getAuthName()"><!-- --></A><H3>
getAuthName</H3>
<PRE>
public <A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A> <B>getAuthName</B>()</PRE>
<DL>
<DD>Returns the username with which this client authenticated. Note: if <A HREF="../../../../com/threerings/presents/server/PresentsSession.html#setUsername(com.threerings.util.Name, com.threerings.presents.server.PresentsSession.UserChangeListener)"><CODE>setUsername(com.threerings.util.Name, com.threerings.presents.server.PresentsSession.UserChangeListener)</CODE></A> has
 been called this may differ from <A HREF="../../../../com/threerings/presents/server/PresentsSession.html#getClientObject()"><CODE>getClientObject()</CODE></A>.username.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getInetAddress()"><!-- --></A><H3>
getInetAddress</H3>
<PRE>
public java.net.InetAddress <B>getInetAddress</B>()</PRE>
<DL>
<DD>Returns the address of the connected client or null if this client is not connected.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="getTransmitDatagrams()"><!-- --></A><H3>
getTransmitDatagrams</H3>
<PRE>
public boolean <B>getTransmitDatagrams</B>()</PRE>
<DL>
<DD>Checks whether the client has requested that datagram transmission be enabled.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setClassLoader(java.lang.ClassLoader)"><!-- --></A><H3>
setClassLoader</H3>
<PRE>
public void <B>setClassLoader</B>(java.lang.ClassLoader&nbsp;loader)</PRE>
<DL>
<DD>Configures this session with a custom class loader that will be used when unserializing
 classes from the network.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setIncomingMessageThrottle(int)"><!-- --></A><H3>
setIncomingMessageThrottle</H3>
<PRE>
public void <B>setIncomingMessageThrottle</B>(int&nbsp;messagesPerSec)</PRE>
<DL>
<DD>Configures the rate at which incoming messages are throttled for this client. This will
 communicate the new limit to the client and begin enforcing the limit when the client has
 acknowledged the new limit.

 <p><em>Note:</em> this means that a hacked client can refuse to ACK message rate reductions
 and continue to use the most generous rate ever assigned to it.  Don't increase the throttle
 beyond the default for untrusted clients. This mechanism exists so that trusted clients can
 have their throttle relaxed in a robust manner which will not result in disconnects if the
 client happens to be at or near the throttle limit when the throttle is reduced.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setUsername(com.threerings.util.Name, com.threerings.presents.server.PresentsSession.UserChangeListener)"><!-- --></A><H3>
setUsername</H3>
<PRE>
public void <B>setUsername</B>(<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A>&nbsp;username,
                        <A HREF="../../../../com/threerings/presents/server/PresentsSession.UserChangeListener.html" title="interface in com.threerings.presents.server">PresentsSession.UserChangeListener</A>&nbsp;ucl)</PRE>
<DL>
<DD><em>Danger:</em> this method is not for general consumption. This changes the username of
 the client, but should only be done very early in a user's session, when you know that no
 one has mapped the user based on their username or has in any other way made use of their
 username in a way that will break. However, it should not be done <em>too</em> early in the
 session. The client must be fully resolved.

 <p> It exists to support systems wherein a user logs in with an account username and then
 chooses a "screen name" by which they will play (often from a small set of available
 "characters" available per account). This will take care of remapping the username to client
 object mappings that were made by the Presents services when the user logs on, but anything
 else that has had its grubby mits on the username will be left to its own devices, hence the
 care that must be exercised when using this method.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>ucl</CODE> - an entity that will (optionally) be notified when the username conversion process
 is complete.</DL>
</DD>
</DL>
<HR>

<A NAME="updateUsername(com.threerings.util.Name)"><!-- --></A><H3>
updateUsername</H3>
<PRE>
public boolean <B>updateUsername</B>(<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A>&nbsp;username)</PRE>
<DL>
<DD><em>Double Danger:</em> this method is not for general consumption. Like
 <code>#setUsername</code>, this changes the username of the client, but unlike setUsername, it
 does it in the existing client object. Care must be taken to ensure that any client or
 server code either doesn't map things based on username before this call, or that it's
 updated to reflect the change.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>- true if the client was successfully renamed, false otherwise</DL>
</DD>
</DL>
<HR>

<A NAME="getClientObject()"><!-- --></A><H3>
getClientObject</H3>
<PRE>
public <A HREF="../../../../com/threerings/presents/data/ClientObject.html" title="class in com.threerings.presents.data">ClientObject</A> <B>getClientObject</B>()</PRE>
<DL>
<DD>returns the client object that is associated with this client.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="endSession()"><!-- --></A><H3>
endSession</H3>
<PRE>
public void <B>endSession</B>()</PRE>
<DL>
<DD>Forcibly terminates a client's session. This must be called from the dobjmgr thread.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="shutdown()"><!-- --></A><H3>
shutdown</H3>
<PRE>
public void <B>shutdown</B>()</PRE>
<DL>
<DD>This is called when the server is shut down in the middle of a client session. In this
 circumstance, <A HREF="../../../../com/threerings/presents/server/PresentsSession.html#endSession()"><CODE>endSession()</CODE></A> will <em>not</em> be called and so any persistent data
 that might normally be flushed at the end of a client's session should likely be flushed
 here.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="clientResolved(com.threerings.util.Name, com.threerings.presents.data.ClientObject)"><!-- --></A><H3>
clientResolved</H3>
<PRE>
public void <B>clientResolved</B>(<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A>&nbsp;username,
                           <A HREF="../../../../com/threerings/presents/data/ClientObject.html" title="class in com.threerings.presents.data">ClientObject</A>&nbsp;clobj)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../com/threerings/presents/server/ClientResolutionListener.html#clientResolved(com.threerings.util.Name, com.threerings.presents.data.ClientObject)">ClientResolutionListener</A></CODE></B></DD>
<DD>Called when resolution completed successfully.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/threerings/presents/server/ClientResolutionListener.html#clientResolved(com.threerings.util.Name, com.threerings.presents.data.ClientObject)">clientResolved</A></CODE> in interface <CODE><A HREF="../../../../com/threerings/presents/server/ClientResolutionListener.html" title="interface in com.threerings.presents.server">ClientResolutionListener</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="resolutionFailed(com.threerings.util.Name, java.lang.Exception)"><!-- --></A><H3>
resolutionFailed</H3>
<PRE>
public void <B>resolutionFailed</B>(<A HREF="../../../../com/threerings/util/Name.html" title="class in com.threerings.util">Name</A>&nbsp;username,
                             java.lang.Exception&nbsp;reason)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../com/threerings/presents/server/ClientResolutionListener.html#resolutionFailed(com.threerings.util.Name, java.lang.Exception)">ClientResolutionListener</A></CODE></B></DD>
<DD>Called when resolution fails.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/threerings/presents/server/ClientResolutionListener.html#resolutionFailed(com.threerings.util.Name, java.lang.Exception)">resolutionFailed</A></CODE> in interface <CODE><A HREF="../../../../com/threerings/presents/server/ClientResolutionListener.html" title="interface in com.threerings.presents.server">ClientResolutionListener</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="handleMessage(com.threerings.presents.net.Message)"><!-- --></A><H3>
handleMessage</H3>
<PRE>
public void <B>handleMessage</B>(<A HREF="../../../../com/threerings/presents/net/Message.html" title="class in com.threerings.presents.net">Message</A>&nbsp;message)</PRE>
<DL>
<DD><B>Description copied from interface: <CODE><A HREF="../../../../com/threerings/presents/server/net/PresentsConnection.MessageHandler.html#handleMessage(com.threerings.presents.net.Message)">PresentsConnection.MessageHandler</A></CODE></B></DD>
<DD>Called when a complete message has been parsed from incoming network data.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../../com/threerings/presents/server/net/PresentsConnection.MessageHandler.html#handleMessage(com.threerings.presents.net.Message)">handleMessage</A></CODE> in interface <CODE><A HREF="../../../../com/threerings/presents/server/net/PresentsConnection.MessageHandler.html" title="interface in com.threerings.presents.server.net">PresentsConnection.MessageHandler</A></CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="toString()"><!-- --></A><H3>
toString</H3>
<PRE>
public java.lang.String <B>toString</B>()</PRE>
<DL>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE>toString</CODE> in class <CODE>java.lang.Object</CODE></DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/PresentsSession.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../com/threerings/presents/server/PresentsServer.PresentsServerModule.html" title="class in com.threerings.presents.server"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../com/threerings/presents/server/PresentsSession.UserChangeListener.html" title="interface in com.threerings.presents.server"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?com/threerings/presents/server/PresentsSession.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="PresentsSession.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2012. All Rights Reserved.
</BODY>
</HTML>
